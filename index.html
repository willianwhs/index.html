<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJUDA AI | Intelig√™ncia em Servi√ßos</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        :root {
            --brand-yellow: #FFB400; 
            --brand-yellow-hover: #E6A200;
            --brand-dark: #0F1115; 
            --card-bg: #181A20;
            --text-main: #FFFFFF;
            --text-muted: #94A3B8;
            --border: rgba(255, 255, 255, 0.08);
        }

        * { box-sizing: border-box; transition: all 0.2s ease; scroll-behavior: smooth; }
        body { margin: 0; font-family: 'Plus Jakarta Sans', sans-serif; background: var(--brand-dark); color: var(--text-main); overflow-x: hidden; }
        .container { max-width: 1200px; margin: auto; padding: 0 24px; }

        header { 
            background: rgba(15, 17, 21, 0.95); 
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            position: sticky; top: 0; z-index: 1000; padding: 15px 0;
        }
        .nav { display: flex; align-items: center; justify-content: space-between; }
        .logo { font-size: 26px; font-weight: 800; color: var(--brand-yellow); text-decoration: none; letter-spacing: -1.5px; }
        .logo span { color: white; }

        /* HERO */
        .hero { padding: 80px 0 40px; text-align: center; }
        .hero h1 { font-size: 58px; font-weight: 800; line-height: 1; margin: 0 0 20px; letter-spacing: -2px; }
        .hero h1 mark { background: none; color: var(--brand-yellow); }
        .hero p { font-size: 20px; color: var(--text-muted); max-width: 650px; margin: 0 auto 40px; }

        /* BUSCA */
        .search-area {
            background: var(--card-bg); border: 1px solid var(--border);
            padding: 10px; border-radius: 24px; max-width: 800px; margin: auto;
            display: flex; gap: 10px; box-shadow: 0 30px 60px rgba(0,0,0,0.5);
        }
        .search-area input { flex: 1; background: transparent; border: none; padding: 18px 25px; color: white; font-size: 17px; outline: none; }
        .btn-main {
            background: var(--brand-yellow); color: #000; border: none;
            padding: 18px 35px; border-radius: 18px; font-weight: 800; cursor: pointer;
            font-size: 15px; text-transform: uppercase;
        }
        .btn-main:hover { background: var(--brand-yellow-hover); transform: translateY(-3px); }

        /* CATEGORIAS */
        .cat-section { padding: 30px 0; overflow-x: auto; }
        .cat-container { display: flex; gap: 12px; justify-content: center; }
        .cat-chip {
            padding: 12px 28px; border-radius: 100px; border: 1px solid var(--border);
            background: var(--card-bg); cursor: pointer; font-size: 14px; font-weight: 700; color: var(--text-muted);
        }
        .cat-chip.active { background: var(--brand-yellow); color: #000; border-color: var(--brand-yellow); }

        /* MAPA E RESULTADOS */
        #map { height: 450px; border-radius: 32px; border: 1px solid var(--border); margin: 30px 0; z-index: 10; }
        .results-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; }
        .card-provider { background: var(--card-bg); border: 1px solid var(--border); padding: 30px; border-radius: 28px; transition: 0.3s; }
        .card-provider:hover { border-color: var(--brand-yellow); transform: translateY(-5px); }
        .card-provider .label { color: var(--brand-yellow); font-size: 12px; font-weight: 800; text-transform: uppercase; }
        .btn-connect {
            display: block; text-align: center; border: 1px solid var(--brand-yellow);
            padding: 15px; border-radius: 15px; text-decoration: none; color: var(--brand-yellow);
            font-weight: 800; font-size: 14px; margin-top: 20px;
        }
        .btn-connect:hover { background: var(--brand-yellow); color: #000; }

        /* SE√á√ÉO QUEM SOMOS - NOVO */
        .about-section { padding: 100px 0; background: rgba(255,255,255,0.01); border-top: 1px solid var(--border); margin-top: 80px; }
        .about-grid { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 60px; align-items: center; }
        .about-content h2 { font-size: 48px; margin: 20px 0; line-height: 1.1; letter-spacing: -2px; }
        .about-content p { color: var(--text-muted); font-size: 18px; line-height: 1.6; }
        .about-card-decorative {
            background: linear-gradient(135deg, var(--brand-yellow), #FF8C00);
            padding: 40px; border-radius: 30px; color: #000; transform: rotate(3deg);
            box-shadow: 0 20px 40px rgba(255, 180, 0, 0.2);
        }
        .about-card-decorative h3 { font-size: 24px; font-weight: 800; margin-top: 0; }

        /* TESTEMUNHOS */
        .t-section { padding: 80px 0; text-align: center; }
        .t-flex { display: flex; flex-wrap: wrap; gap: 20px; margin-top: 40px; justify-content: center; }
        .t-box { background: var(--card-bg); padding: 30px; border-radius: 24px; max-width: 350px; text-align: left; border: 1px solid var(--border); }

        /* MODAL */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);
            display: none; align-items: center; justify-content: center; z-index: 2000;
        }
        .modal-body { 
            background: var(--card-bg); padding: 45px; border-radius: 35px; width: 95%; 
            max-width: 500px; border: 1px solid var(--border); position: relative;
        }
        .modal-body input {
            width: 100%; padding: 18px; margin-bottom: 15px; background: rgba(255,255,255,0.03);
            border: 1px solid var(--border); border-radius: 15px; color: white; outline: none; font-size: 16px;
        }
        .modal-body input:focus { border-color: var(--brand-yellow); }

        @media (max-width: 768px) {
            .hero h1 { font-size: 42px; }
            .about-grid { grid-template-columns: 1fr; text-align: center; }
            .about-card-decorative { transform: rotate(0); }
            .search-area { flex-direction: column; border-radius: 25px; }
        }
    </style>
</head>
<body>

<header>
    <div class="container nav">
        <a href="#" class="logo">AJUDA<span>AI</span></a>
        <div style="display:flex; gap:20px; align-items:center;">
            <a href="#quem-somos" style="color:white; text-decoration:none; font-size:14px; font-weight:600;">Quem Somos</a>
            <button onclick="openModal()" class="btn-main" style="padding: 10px 20px; font-size: 12px;">SOU PRESTADOR</button>
        </div>
    </div>
</header>

<section class="hero">
    <div class="container">
        <h1>Onde a sua busca<br>encontra a <mark>solu√ß√£o</mark>.</h1>
        <p>A plataforma inteligente que conecta voc√™ aos melhores profissionais locais com a seguran√ßa de uma fintech.</p>
        <div class="search-area">
            <input type="text" id="searchInput" placeholder="O que voc√™ est√° procurando?" onkeyup="runFilters()">
            <button class="btn-main" onclick="runFilters()">BUSCAR</button>
        </div>
    </div>
</section>

<div class="cat-section">
    <div class="container cat-container">
        <div class="cat-chip active" onclick="setCategory('Tudo', this)">Tudo</div>
        <div class="cat-chip" onclick="setCategory('Reformas', this)">Reformas</div>
        <div class="cat-chip" onclick="setCategory('El√©trica', this)">El√©trica</div>
        <div class="cat-chip" onclick="setCategory('Limpeza', this)">Limpeza</div>
        <div class="cat-chip" onclick="setCategory('Aulas', this)">Aulas</div>
    </div>
</div>

<div class="container">
    <div id="map"></div>
    <div class="results-grid" id="providersList"></div>
</div>

<section id="quem-somos" class="about-section">
    <div class="container">
        <div class="about-grid">
            <div class="about-content">
                <span style="color:var(--brand-yellow); font-weight:800; font-size:12px; letter-spacing:2px;">NOSSA MISS√ÉO</span>
                <h2>Conectando talentos,<br>facilitando <mark>vidas</mark>.</h2>
                <p>
                    O <strong>AJUDA AI</strong> nasceu para transformar a forma como voc√™ cuida do que √© importante. 
                    Somos a intelig√™ncia que conecta a necessidade de quem precisa com o talento de quem faz. 
                    Unindo tecnologia de geolocaliza√ß√£o e seguran√ßa, garantimos que o profissional ideal esteja a poucos cliques de dist√¢ncia.
                </p>
                <div style="display:flex; gap:30px; margin-top:30px;">
                    <div><b style="color:var(--brand-yellow); font-size:24px;">+100%</b><br><small>Foco Local</small></div>
                    <div><b style="color:var(--brand-yellow); font-size:24px;">Direto</b><br><small>Via WhatsApp</small></div>
                    <div><b style="color:var(--brand-yellow); font-size:24px;">Gr√°tis</b><br><small>Para Clientes</small></div>
                </div>
            </div>
            <div class="about-image">
                <div class="about-card-decorative">
                    <h3>Prop√≥sito</h3>
                    <p style="font-weight:600; line-height:1.4">Ser a maior rede de apoio a servi√ßos do Brasil, impulsionando a economia local atrav√©s da tecnologia.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="t-section">
    <div class="container">
        <h2>O que dizem sobre o AJUDA AI</h2>
        <div class="t-flex">
            <div class="t-box">
                <p>"Incr√≠vel como o AJUDA AI facilitou minha busca por um encanador. Resolvi tudo em 10 minutos!"</p>
                <b style="color:var(--brand-yellow)">- Ricardo M., Sumar√©</b>
            </div>
            <div class="t-box">
                <p>"Minha agenda est√° sempre cheia agora. O mapa do AJUDA AI me trouxe visibilidade real."</p>
                <b style="color:var(--brand-yellow)">- S√¥nia Limpezas</b>
            </div>
        </div>
    </div>
</section>

<div class="modal-overlay" id="modalOverlay">
    <div class="modal-body">
        <h2 style="margin-top:0">Seja um Parceiro</h2>
        <p style="color:var(--text-muted); margin-bottom:30px;">Cadastre seus servi√ßos e comece a receber chamados agora mesmo.</p>
        <form id="mainForm">
            <input name="nome" placeholder="Nome Completo / Empresa" required>
            <input name="servico" placeholder="Sua Especialidade (ex: Pintor)" required>
            <input name="cidade" placeholder="Cidade de Atua√ß√£o" required>
            <input name="whatsapp" placeholder="WhatsApp (apenas n√∫meros)" required>
            <input type="hidden" name="lat" id="lat" value="0">
            <input type="hidden" name="lng" id="lng" value="0">
            <button type="submit" class="btn-main" id="submitBtn" style="width:100%; margin-top:10px;">CADASTRAR MEU PERFIL</button>
            <button type="button" onclick="closeModal()" style="width:100%; background:none; border:none; color:white; margin-top:15px; cursor:pointer; opacity:0.5">Cancelar</button>
        </form>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    let providers = [];
    let activeCat = 'Tudo';
    const map = L.map('map', { zoomControl: false, scrollWheelZoom: false }).setView([-22.75, -47.33], 12);
    
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);

    function openModal() { 
        document.getElementById('modalOverlay').style.display='flex'; 
        if(navigator.geolocation) navigator.geolocation.getCurrentPosition(p=>{
            document.getElementById('lat').value=p.coords.latitude;
            document.getElementById('lng').value=p.coords.longitude;
        });
    }
    function closeModal() { document.getElementById('modalOverlay').style.display='none'; }

    async function fetchData() {
        try {
            const res = await fetch("https://opensheet.elk.sh/1ImYSb5Cih3eGu7jqU3zjLTbvNvGTuhGjeTKSTo5_j7M/P√°gina1");
            providers = await res.json();
            runFilters();
        } catch(e) { console.error("Erro ao carregar dados"); }
    }

    function setCategory(cat, el) {
        document.querySelectorAll('.cat-chip').forEach(c => c.classList.remove('active'));
        el.classList.add('active');
        activeCat = cat;
        runFilters();
    }

    function runFilters() {
        const query = document.getElementById('searchInput').value.toLowerCase();
        const filtered = providers.filter(p => {
            const mCat = activeCat === 'Tudo' || p.servico.toLowerCase().includes(activeCat.toLowerCase());
            const mText = p.nome.toLowerCase().includes(query) || p.servico.toLowerCase().includes(query) || p.cidade.toLowerCase().includes(query);
            return mCat && mText;
        });
        render(filtered);
    }

    function render(data) {
        const box = document.getElementById('providersList');
        box.innerHTML = "";
        map.eachLayer(l => { if(l instanceof L.Marker) map.removeLayer(l); });

        data.forEach(p => {
            const card = document.createElement('div');
            card.className = 'card-provider';
            card.innerHTML = `
                <div class="label">${p.servico}</div>
                <h3>${p.nome}</h3>
                <p>üìç ${p.cidade}</p>
                <a href="https://wa.me/55${p.whatsapp.replace(/\D/g,'')}" target="_blank" class="btn-connect">CHAMAR NO WHATSAPP</a>
            `;
            box.appendChild(card);
            
            if(p.lat && p.lng && p.lat != 0) {
                const markerIcon = L.divIcon({
                    className: 'marker',
                    html: `<div style='background-color:var(--brand-yellow); width:14px; height:14px; border-radius:50%; border:2px solid white; box-shadow:0 0 10px var(--brand-yellow);'></div>`,
                    iconSize: [14, 14]
                });
                L.marker([p.lat, p.lng], {icon: markerIcon}).addTo(map).bindPopup(`<b>${p.nome}</b><br>${p.servico}`);
            }
        });
    }

    mainForm.onsubmit = async (e) => {
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        btn.innerText = "PROCESSANDO...";
        btn.disabled = true;

        const fd = new FormData(mainForm);
        const payload = Object.fromEntries(fd);

        // Geocodifica√ß√£o Autom√°tica de Fallback (Invis√≠vel para o usu√°rio)
        if(payload.lat == "0") {
            try {
                const geo = await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(payload.cidade)}&format=json&limit=1`).then(r=>r.json());
                if(geo[0]) { payload.lat = geo[0].lat; payload.lng = geo[0].lon; }
            } catch(e) { console.log("Erro geo local"); }
        }

        try {
            await fetch("https://hook.us2.make.com/rmdusinc4e6pg1akovep4zrd6rw1fpyw", {
                method: 'POST', 
                headers: {'Content-Type':'application/json'},
                body: JSON.stringify(payload)
            });
            alert("Cadastro realizado com sucesso!");
            closeModal();
            fetchData();
        } catch(e) { alert("Erro ao enviar. Verifique sua conex√£o."); }
        
        btn.innerText = "CADASTRAR MEU PERFIL";
        btn.disabled = false;
    }

    fetchData();
</script>
</body>
</html>
