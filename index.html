<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AJUDAAI ‚Äî Profissionais perto de voc√™</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
:root{
  --amarelo:#FFC107;
  --azul:#1E3A8A;
  --azul2:#0f2c6e;
  --cinza:#f4f6f8;
  --escuro:#1f2937;
  --whatsapp:#25D366;
}

*{box-sizing:border-box;font-family:"Inter",Arial,Helvetica,sans-serif}
body{margin:0;background:var(--cinza);color:var(--escuro)}

header{
  background:linear-gradient(135deg,#fff,#f8fafc);
  padding:60px 16px 40px;
  text-align:center;
  border-bottom:3px solid var(--amarelo);
}

h1{margin:0;font-size:42px;font-weight:900;letter-spacing:2px}
.logo-ajuda{color:var(--azul)}
.logo-ai{color:var(--amarelo)}

.hero-text{
  max-width:760px;
  margin:18px auto 0;
  font-size:19px;
  color:#555;
  line-height:1.6;
}

.hero-actions{
  margin-top:26px;
  display:flex;
  justify-content:center;
  gap:12px;
  flex-wrap:wrap;
}

input{
  padding:14px;
  border-radius:12px;
  border:1px solid #ddd;
  min-width:260px;
  font-size:15px;
}

button{
  border:none;
  padding:14px 18px;
  border-radius:12px;
  font-weight:bold;
  cursor:pointer;
  transition:.2s;
}

button:hover{transform:translateY(-1px)}

.btn-azul{background:var(--azul);color:#fff}
.btn-amarelo{background:var(--amarelo);color:#000}
.btn-outline{
  background:#fff;
  border:2px solid var(--azul);
  color:var(--azul);
}

.botao-whatsapp{
  display:inline-block;
  background:var(--whatsapp);
  color:#fff;
  padding:12px 14px;
  border-radius:10px;
  text-decoration:none;
  font-weight:bold;
}

.como-funciona{
  max-width:1100px;
  margin:40px auto;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:22px;
  padding:0 16px;
}

.card-info{
  background:#fff;
  padding:24px;
  border-radius:18px;
  text-align:center;
  box-shadow:0 8px 22px rgba(0,0,0,.06);
  font-size:15px;
}

#map{
  height:320px;
  max-width:1100px;
  margin:20px auto;
  border-radius:18px;
  box-shadow:0 8px 22px rgba(0,0,0,.08);
}

.cards{
  display:none;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:24px;
  padding:20px;
  max-width:1100px;
  margin:auto;
}

.card{
  background:#fff;
  padding:22px;
  border-radius:18px;
  text-align:center;
  box-shadow:0 10px 24px rgba(0,0,0,.08);
  position:relative;
  transition:.2s;
}

.card:hover{transform:translateY(-4px)}

.selo{
  position:absolute;
  top:12px;
  right:12px;
  background:var(--azul);
  color:#fff;
  padding:6px 10px;
  border-radius:20px;
  font-size:12px;
}

.distancia{
  margin-top:6px;
  font-size:14px;
  color:var(--azul);
  font-weight:bold;
}

.cta-prestador{
  background:linear-gradient(135deg,var(--azul),var(--azul2));
  color:#fff;
  margin:50px 16px;
  padding:40px;
  border-radius:22px;
  text-align:center;
  box-shadow:0 12px 30px rgba(0,0,0,.15);
}

.cta-prestador h2{margin-top:0;font-size:28px}

footer{
  text-align:center;
  padding:30px;
  color:#666;
}
</style>
</head>

<body>

<header>
  <h1><span class="logo-ajuda">AJUDA</span><span class="logo-ai">AI</span></h1>

  <div class="hero-text">
    Encontre prestadores de servi√ßos confi√°veis perto de voc√™.<br>
    R√°pido, seguro e direto pelo WhatsApp.
  </div>

  <div class="hero-actions">
    <input id="busca" placeholder="Buscar servi√ßo ou cidade">
    <button class="btn-amarelo" onclick="buscar()">Buscar</button>
    <button class="btn-azul" onclick="localizacao()">üìç Perto de mim</button>
    <a href="cadastro.html">
      <button class="btn-outline">Sou prestador</button>
    </a>
  </div>
</header>

<section class="como-funciona">
  <div class="card-info">üìç <strong>Encontre perto</strong><br>Profissionais da sua regi√£o</div>
  <div class="card-info">‚≠ê <strong>Verificados</strong><br>Mais confian√ßa</div>
  <div class="card-info">üí¨ <strong>Contato direto</strong><br>Sem intermedi√°rios</div>
</section>

<div id="map"></div>

<section class="cards" id="lista"></section>

<section class="cta-prestador">
  <h2>√â prestador de servi√ßos?</h2>
  <p>Cadastre-se gratuitamente e comece a receber clientes.</p>
  <a href="cadastro.html">
    <button class="btn-amarelo">Quero me cadastrar</button>
  </a>
</section>

<footer>
  ¬© 2026 AJUDAAI ‚Äî Todos os direitos reservados
</footer>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const URL="https://raw.githubusercontent.com/willianwhs/ajudaai/main/prestadores.json";
let dados=[],markers=[],map=L.map('map').setView([-15.8,-47.9],4);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

/* CACHE BYPASS ‚Üí sempre dados novos */
async function carregarDados(){
  const r=await fetch(URL+"?t="+Date.now());
  dados=await r.json();
}

carregarDados();

/* auto atualiza√ß√£o a cada 60s */
setInterval(carregarDados,60000);

function calcularDistancia(lat1,lng1,lat2,lng2){
  const R=6371;
  const dLat=(lat2-lat1)*Math.PI/180;
  const dLng=(lng2-lng1)*Math.PI/180;
  const a=Math.sin(dLat/2)**2+
    Math.cos(lat1*Math.PI/180)Math.cos(lat2*Math.PI/180)
    Math.sin(dLng/2)**2;
  return R*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)));
}

function buscar(){
  const t=document.getElementById("busca").value.toLowerCase().trim();
  mostrar(dados.filter(p =>
    p.servico.toLowerCase().includes(t) ||
    p.cidade.toLowerCase().includes(t)
  ));
}

function localizacao(){
  navigator.geolocation.getCurrentPosition(pos=>{
    dados.forEach(p=>{
      if(p.lat&&p.lng){
        p.distancia=calcularDistancia(
          pos.coords.latitude,
          pos.coords.longitude,
          p.lat,
          p.lng
        );
      }
    });

    dados.sort((a,b)=>{
      return (
        (b.verificado?1:0)-(a.verificado?1:0) ||
        (b.media||0)-(a.media||0) ||
        (a.distancia||999)-(b.distancia||999)
      );
    });

    mostrar(dados);
    map.setView([pos.coords.latitude,pos.coords.longitude],12);

    document.getElementById("lista").scrollIntoView({behavior:"smooth"});
  });
}

function mostrar(lista){
  document.querySelector(".cards").style.display="grid";
  const c=document.getElementById("lista");
  c.innerHTML="";
  markers.forEach(m=>map.removeLayer(m));
  markers=[];

  lista.forEach(p=>{
    if(p.lat&&p.lng){
      markers.push(L.marker([p.lat,p.lng]).addTo(map));
    }
    c.innerHTML+=`
    <div class="card">
      ${p.verificado?'<div class="selo">‚úî Verificado</div>':''}
      <strong>${p.nome}</strong><br>
      ${p.servico}<br>
      ${p.cidade}
      ${p.distancia?<div class="distancia">üìç ${p.distancia.toFixed(1)} km de voc√™</div>:''}
      <br><br>
      <a class="botao-whatsapp" href="https://wa.me/55${p.whatsapp}" target="_blank">
        WhatsApp
      </a>
    </div>`;
  });
}
</script>

</body>
</html>
